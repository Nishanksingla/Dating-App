<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/jquery.mobile-1.4.2.min.css">
<script src= "js/jquery-1.11.0.min.js"></script>
<script src="js/jquery.mobile-1.4.2.min.js"></script>
    <script>
       $(function(){
            $("#fbInfo").hide();
        
        window.fbAsyncInit = function() {
            debugger
            $('#log').append('<h2>fbAsyncInit</h2>');
            FB.init({
              appId      : '776345902386381', // Set YOUR APP ID      
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });
        $('#log').append('<h2>after FB.init</h2>');
            FB.Event.subscribe('auth.authResponseChange', function(response) 
                {
                    console.log(response);
                    $('#log').append('<h2>FB.Event.subscribe</h2>');
                    $('#log').append('<h2>'+response+'</h2>');
                    if (response.status === 'connected') 
                    {
                        $('#log').append('<h2>Connected to Facebook</h2>');
                        
                    }    
                    else if (response.status === 'not_authorized') 
                    {
                        $('#log').append('<h2>Failed to Connect</h2>');
                        //FAILED
                    } else 
                    {
                        $('#log').append('<h2>Logged Out</h2>');
                    }
                }); 

                };
});
                function Login()
                {
                    $('#log').append('<h2>In login function</h2>');
                    FB.login(function(response) {
                       if (response.authResponse) 
                       {
                           getUserInfo();
                        } else 
                        {
                            $('#log').append('<h2>User cancelled login or did not fully authorize</h2>');
                            console.log('User cancelled login or did not fully authorize.');
                        }
                     },{scope: 'email,user_photos,user_videos'});

                }
            
        function getUserInfo() {   
            $('#log').append('<h2>In getUserInfo()</h2>');
            FB.api('/me', function(response) {
                  $("#fbInfo").show();
                  $("#name").val(response.name);
                  $("#link").val(response.link);
                  $("#id").val(response.id);
                  $("#email").val(response.email);        
                getPhoto();
            });
    }
    
    function getPhoto()
    {
        $('#log').append('<h2>In getPhoto()</h2>');
        FB.api('/me/picture?type=normal', function(response) {
        $("#fbInfo").append("<img src='"+response.data.url+"'/>");
    });
 
    }
    function Logout()
    {
        FB.logout(function(){document.location.reload();});
    }
 
        
    </script>
</head>
<body>
<div id="fb-root"></div>
<script>
  // Load the SDK asynchronously
  (function(d){
      debugger
      alert('Loading FB SDK');
      $('#log').append('<h2>Loading FB SDK</h2>');
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "http://connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
 
</script>
    
<div data-role="page">
  <div data-role="header" data-position="fixed">
    <h1>FB Login</h1>
  </div>

  <div data-role="main" class="ui-content" style="text-align:center;height: 200px;">
      <div class="ui-field-contain" id="fbInfo">
            <label for="name">Name:</label>
            <input type="text" name="fname" id="name">
            
              <label for="link">Link:</label>
            <input type="text" name="link" id="link">  
              <label for="id">ID:</label>
            <input type="text" name="lname" id="id">  
              <label for="email">Email:</label>
            <input type="text" name="email" id="email">            
          </div>
    <fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button> 
      <div style="height:30px;width:100px;margin:0 auto;text-align:center">
          <button style="" value="fb Login" onclick="Login()">fb Login</button>
      </div>
  </div>
<div id="log" style="margin:0 auto;width:50%;text-align:center"> Logs:</div>
  <div data-role="footer" data-position="fixed">
    <h1>By Nishank singla</h1>
  </div>
</div> 
    
</body>
</html>